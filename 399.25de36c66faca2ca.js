"use strict";(self.webpackChunkunlock_me=self.webpackChunkunlock_me||[]).push([[399],{5399:(k,a,l)=>{l.r(a),l.d(a,{PrizeComponent:()=>f});var h=l(6895),m=l(7553),x=l(8929),g=l(353),z=l(3489),C=l(2866);class P{constructor(e,t,i,o){this.bufferTimeSpan=e,this.bufferCreationInterval=t,this.maxBufferSize=i,this.scheduler=o}call(e,t){return t.subscribe(new S(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))}}class O{constructor(){this.buffer=[]}}class S extends z.L{constructor(e,t,i,o,c){super(e),this.bufferTimeSpan=t,this.bufferCreationInterval=i,this.maxBufferSize=o,this.scheduler=c,this.contexts=[];const r=this.openContext();if(this.timespanOnly=null==i||i<0,this.timespanOnly)this.add(r.closeAction=c.schedule(p,t,{subscriber:this,context:r,bufferTimeSpan:t}));else{const $={bufferTimeSpan:t,bufferCreationInterval:i,subscriber:this,scheduler:c};this.add(r.closeAction=c.schedule(d,t,{subscriber:this,context:r})),this.add(c.schedule(T,i,$))}}_next(e){const t=this.contexts,i=t.length;let o;for(let c=0;c<i;c++){const r=t[c],u=r.buffer;u.push(e),u.length==this.maxBufferSize&&(o=r)}o&&this.onBufferFull(o)}_error(e){this.contexts.length=0,super._error(e)}_complete(){const{contexts:e,destination:t}=this;for(;e.length>0;){const i=e.shift();t.next(i.buffer)}super._complete()}_unsubscribe(){this.contexts=null}onBufferFull(e){this.closeContext(e);const t=e.closeAction;if(t.unsubscribe(),this.remove(t),!this.closed&&this.timespanOnly){e=this.openContext();const i=this.bufferTimeSpan;this.add(e.closeAction=this.scheduler.schedule(p,i,{subscriber:this,context:e,bufferTimeSpan:i}))}}openContext(){const e=new O;return this.contexts.push(e),e}closeContext(e){this.destination.next(e.buffer);const t=this.contexts;(t?t.indexOf(e):-1)>=0&&t.splice(t.indexOf(e),1)}}function p(s){const e=s.subscriber,t=s.context;t&&e.closeContext(t),e.closed||(s.context=e.openContext(),s.context.closeAction=this.schedule(s,s.bufferTimeSpan))}function T(s){const{bufferCreationInterval:e,bufferTimeSpan:t,subscriber:i,scheduler:o}=s,c=i.openContext();i.closed||(i.add(c.closeAction=o.schedule(d,t,{subscriber:i,context:c})),this.schedule(s,e))}function d(s){const{subscriber:e,context:t}=s;e.closeContext(t)}var v=l(2198),A=l(4850),n=l(4650),y=l(5552);function B(s,e){if(1&s&&(n.TgZ(0,"span",6),n._uU(1),n.qZA()),2&s){const t=n.oxw().$implicit;n.xp6(1),n.hij("[",t.usedDate,"]")}}function I(s,e){if(1&s){const t=n.EpF();n.TgZ(0,"li",3),n.NdJ("click",function(){const c=n.CHM(t).$implicit,r=n.oxw(2);return n.KtG(r.onPrizeClick(c))}),n.TgZ(1,"span",4),n._uU(2),n.qZA(),n.YNc(3,B,2,1,"span",5),n.qZA()}if(2&s){const t=e.$implicit;n.ekj("used",t.usedDate),n.xp6(2),n.Oqu(t.name),n.xp6(1),n.Q6J("ngIf",t.usedDate)}}function Z(s,e){if(1&s&&(n.TgZ(0,"ul"),n.YNc(1,I,4,4,"li",2),n.qZA()),2&s){const t=e.ngIf;n.xp6(1),n.Q6J("ngForOf",t)}}class f{constructor(e){this.prizes=e,this.prizes$=this.prizes.getPrizes(),this.clickedPrize$=new x.xQ,this.clickedPrize$.pipe(function b(s){let e=arguments.length,t=g.P;(0,C.K)(arguments[arguments.length-1])&&(t=arguments[arguments.length-1],e--);let i=null;e>=2&&(i=arguments[1]);let o=Number.POSITIVE_INFINITY;return e>=3&&(o=arguments[2]),function(r){return r.lift(new P(s,i,o,t))}}(1e3),(0,v.h)(t=>t.length>=4),(0,A.U)(t=>t[0])).subscribe(t=>this.prizes.undoMarkAsUsed(t))}ngOnDestroy(){this.clickedPrize$.complete(),this.clickedPrize$.unsubscribe()}onPrizeClick(e){this.clickedPrize$.next(e.id),e.usedDate||this.prizes.markAsUsed(e.id)}}f.\u0275fac=function(e){return new(e||f)(n.Y36(y.oW))},f.\u0275cmp=n.Xpm({type:f,selectors:[["um-prize"]],standalone:!0,features:[n.jDz],decls:3,vars:3,consts:[[1,"note"],[4,"ngIf"],[3,"used","click",4,"ngFor","ngForOf"],[3,"click"],[1,"prize-name"],["class","prize-used-date",4,"ngIf"],[1,"prize-used-date"]],template:function(e,t){1&e&&(n.TgZ(0,"um-note",0),n.YNc(1,Z,2,1,"ul",1),n.ALo(2,"async"),n.qZA()),2&e&&(n.xp6(1),n.Q6J("ngIf",n.lcZ(2,1,t.prizes$)))},dependencies:[h.ez,h.sg,h.O5,h.Ov,m.K],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}.note[_ngcontent-%COMP%]{margin-top:56px;flex:1}.note.used[_ngcontent-%COMP%]   .prize-name[_ngcontent-%COMP%]{text-decoration:line-through}.prize-used-date[_ngcontent-%COMP%]{margin-left:1em;font-size:.6em;white-space:nowrap}"],changeDetection:0})}}]);